<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Felfedező App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 50%, #fdbb2d 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 100%;
            width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 97vh;
        }
        
        header {
            text-align: center;
            padding: 15px;
            background: #2c3e50;
            color: white;
            position: relative;
        }
        
        .nav-status {
            position: absolute;
            top: 10px;
            right: 15px;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .nav-status.active {
            background: rgba(46, 204, 113, 0.3);
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #e74c3c;
            margin-right: 5px;
        }
        
        .status-dot.active {
            background: #2ecc71;
            animation: pulse 1.5s infinite;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 8px;
        }
        
        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .tab-container {
            display: flex;
            border-bottom: 1px solid #ddd;
            background: #f8f9fa;
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            font-weight: bold;
            color: #7f8c8d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            color: #3498db;
            border-bottom: 3px solid #3498db;
            background: white;
        }
        
        .tab-content {
            flex: 1;
            overflow-y: auto;
            display: none;
            padding: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .poi-info {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .poi-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .thumbnail-image {
            width: 120px;
            height: 90px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .poi-title {
            font-size: 2.2rem;
            color: #2c3e50;
            flex: 1;
        }
        
        .poi-description {
            margin-bottom: 25px;
            font-size: 1.3rem;
            line-height: 1.8;
            color: #555;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            text-align: justify;
        }
        
        .audio-controls {
            margin: 30px 0;
            text-align: center;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 10px;
        }
        
        .audio-controls audio {
            width: 100%;
            height: 50px;
        }
        
        .image-gallery {
            position: relative;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }
        
        .gallery-main-image {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .gallery-thumbnails {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .gallery-thumbnail {
            width: 100px;
            height: 75px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }
        
        .gallery-thumbnail:hover, .gallery-thumbnail.active {
            opacity: 1;
        }
        
        .gallery-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 15px;
        }
        
        .gallery-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            color: #2c3e50;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .gallery-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
        }
        
        .distance-info {
            display: flex;
            flex-direction: column;
        }
        
        .distance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .distance-item.reached {
            background: #e8f5e9;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
            transform: scale(1.02);
        }
        
        .poi-name {
            font-weight: bold;
            font-size: 1.3rem;
            color: #2c3e50;
        }
        
        .distance-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3498db;
        }
        
        .distance-unit {
            font-size: 1rem;
            color: #7f8c8d;
        }
        
        .simulation-controls {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
        }
        
        .simulation-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 50px;
            cursor: pointer;
            margin: 8px;
            font-size: 1.1rem;
            transition: background 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-3px);
        }
        
        #close-poi {
            background: #e74c3c;
            display: block;
            margin: 20px auto;
            padding: 12px 25px;
        }
        
        footer {
            text-align: center;
            padding: 12px;
            color: #7f8c8d;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            font-size: 0.9rem;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @media (max-width: 600px) {
            .container {
                border-radius: 10px;
                height: 97vh;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .nav-status {
                top: 5px;
                right: 10px;
                font-size: 0.8rem;
            }
            
            .tab {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
            
            .poi-header {
                flex-direction: column;
                text-align: center;
            }
            
            .thumbnail-image {
                margin-right: 0;
                margin-bottom: 15px;
                width: 100%;
                max-width: 200px;
            }
            
            .gallery-main-image {
                height: 250px;
            }
            
            .gallery-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .gallery-thumbnail {
                width: 80px;
                height: 60px;
            }
            
            .poi-title {
                font-size: 1.8rem;
            }
            
            .poi-description {
                font-size: 1.1rem;
            }
            
            .distance-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .distance-value {
                margin-top: 5px;
                align-self: flex-end;
            }
            
            button {
                display: block;
                width: 100%;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>GPS Felfedező App</h1>
            <p>Fedezz fel érdekes helyeket a közeledben!</p>
            <div class="nav-status" id="nav-status">
                <div class="status-dot" id="status-dot"></div>
                <span id="status-text">Navigáció inaktív</span>
            </div>
        </header>
        
        <div class="content">
            <div class="main-content">
                <div class="tab-container">
                    <div class="tab active" data-tab="poi">Helyszín információk</div>
                    <div class="tab" data-tab="distance">Távolságok</div>
                </div>
                
                <div class="tab-content active" id="poi-tab">
                    <div class="poi-info">
                        <div class="poi-header">
                            <img id="thumbnail-image" class="thumbnail-image" src="" alt="POI thumbnail">
                            <h2 id="poi-title" class="poi-title"></h2>
                        </div>
                        
                        <p id="poi-description" class="poi-description"></p>
                        
                        <div class="audio-controls">
                            <audio id="poi-audio" controls></audio>
                        </div>
                        
                        <div class="image-gallery">
                            <img id="gallery-main-image" class="gallery-main-image" src="" alt="POI image">
                            <div class="gallery-nav">
                                <button class="gallery-btn" id="prev-btn"><i class="fas fa-chevron-left"></i></button>
                                <button class="gallery-btn" id="next-btn"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div class="gallery-thumbnails" id="gallery-thumbnails"></div>
                        </div>
                        
                        <button id="close-poi">Bezárás</button>
                    </div>
                    
                    <div class="simulation-controls">
                        <h2 class="simulation-title">Helyszín kipróbálása</h2>
                        <p>Válassz egy helyszínt a teszteléshez:</p>
                        <button id="simulate-buda">Budai Vár</button>
                        <button id="simulate-halaszbastya">Halászbástya</button>
                        <button id="simulate-lanchid">Lánchíd</button>
                    </div>
                </div>
                
                <div class="tab-content" id="distance-tab">
                    <div class="welcome-message">
                        <h3>Közeledben lévő érdekes helyek</h3>
                        <p>Az alábbi lista mutatja, hogy milyen messze van a közeledben lévő érdekes helyektől.</p>
                    </div>
                    
                    <div class="distance-info" id="distance-info">
                        <!-- A távolság információk ide fognak kerülni -->
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 GPS Felfedező App | Fedezd fel a világot!</p>
        </footer>
    </div>

    <script>
        // Koordináta konverzió függvény
        function dmsToDecimal(degrees, minutes, seconds, direction) {
            let decimal = degrees + minutes / 60 + seconds / 3600;
            if (direction === 'S' || direction === 'W') {
                decimal = -decimal;
            }
            return decimal;
        }
        
        // Budai Vár koordinátái: 46°14'43.82"É, 20° 9'27.32"K
        const budaiVarLat = dmsToDecimal(46, 14, 43.82, 'N');
        const budaiVarLng = dmsToDecimal(20, 9, 27.32, 'E');
        
        // Halászbástya koordinátái: 46°15'32.36"É, 20° 9'59.65"K
        const halaszbastyaLat = dmsToDecimal(46, 15, 32.36, 'N');
        const halaszbastyaLng = dmsToDecimal(20, 9, 59.65, 'E');

        // Előre meghatározott érdekes pontok (POI-k) több képpel
        const pointsOfInterest = [
            {
                id: 1,
                name: "Budai Vár",
                lat: budaiVarLat,
                lng: budaiVarLng,
                radius: 100,
                images: [
                    "https://www.hetedhetorszag.hu/parameters/hetedhetorszag/modules/Attractions/documents/attraction/32816/image/9834/large.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Budavari_palota_2016.jpg/800px-Budavari_palota_2016.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Budapest_-_Buda_Castle2.jpg/800px-Budapest_-_Buda_Castle2.jpg"
                ],
                description: "A Budai Várnegyed a Duna jobb partján, a Várhegy tetején terül el. Több mint 700 éves múltra tekint vissza, és Budapest egyik leglátogatottabb nevezetessége. A történelmi palota és a középkori utcák egyedülálló atmoszférát teremtenek. A várkomplexum több múzeumnak, galériának és könyvtárnak ad otthont, és gyönyörű kilátást nyújt a városra.",
                audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
            },
            {
                id: 2,
                name: "Halászbástya",
                lat: halaszbastyaLat,
                lng: halaszbastyaLng,
                radius: 50,
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Hal%C3%A1szb%C3%A1stya_2017.jpg/800px-Hal%C3%A1szb%C3%A1stya_2017.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Hal%C3%A1szb%C3%A1stya_a_Szenth%C3%A1roms%C3%A1g_szobr%C3%A1val.jpg/800px-Hal%C3%A1szb%C3%A1stya_a_Szenth%C3%A1roms%C3%A1g_szobr%C3%A1val.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Hal%C3%A1szb%C3%A1stya_%282%29.jpg/800px-Hal%C3%A1szb%C3%A1stya_%282%29.jpg"
                ],
                description: "A Halászbástya Budapest egyik legismertebb látványossága, a Várnegyedben található. 1905-ben épült, neoromán stílusban. Kilátótornyaiból lenyűgöző panoráma nyílik a városra és a Dunara. A Halászbástya neve a középkori halászcéhre utal, akik a várfalak védelmével voltak megbízva. A teraszairól pazar kilátás nyílik a pesti oldalra és a Margaret-szigetre.",
                audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
            },
            {
                id: 3,
                name: "Széchenyi Lánchíd",
                lat: 47.4986,
                lng: 19.0439,
                radius: 80,
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Sz%C3%A9chenyi_Chain_Bridge_%28Budapest%29.jpg/800px-Sz%C3%A9chenyi_Chain_Bridge_%28Budapest%29.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/2015_Budapest_-_Sz%C3%A9chenyi_L%C3%A1nch%C3%ADd_2.jpg/800px-2015_Budapest_-_Sz%C3%A9chenyi_L%C3%A1nch%C3%EDd_2.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Budapest_Chain_Bridge_at_night.jpg/800px-Budapest_Chain_Bridge_at_night.jpg"
                ],
                description: "A Széchenyi lánchíd Budapest legrégebbi és legismertebb hidja, amely Budát és Pestet köti össze. 1849-ben adták át a forgalomnak. Az úttörő mérnöki alkotás ma is a város egyik szimbóluma. A hidat Széchenyi István gróf kezdeményezésére építették, és nevével is őt tisztelik. Az építkezés során számos technikai újítást alkalmaztak, és a híd megépítése jelentős nemzeti üggyé vált.",
                audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"
            }
        ];

        // Alkalmazás állapota
        let currentPosition = null;
        let watchId = null;
        let currentPoi = null;
        let currentImageIndex = 0;
        let isNavigationActive = false;
        let currentAudio = null;

        // Elemek kiválasztása
        const navStatus = document.getElementById('nav-status');
        const statusDot = document.getElementById('status-dot');
        const statusText = document.getElementById('status-text');
        const distanceInfo = document.getElementById('distance-info');
        const thumbnailImage = document.getElementById('thumbnail-image');
        const poiTitle = document.getElementById('poi-title');
        const poiDescription = document.getElementById('poi-description');
        const poiAudio = document.getElementById('poi-audio');
        const galleryMainImage = document.getElementById('gallery-main-image');
        const galleryThumbnails = document.getElementById('gallery-thumbnails');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const closePoiButton = document.getElementById('close-poi');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Szimulációs gombok
        const simulateBuda = document.getElementById('simulate-buda');
        const simulateHalaszbastya = document.getElementById('simulate-halaszbastya');
        const simulateLanchid = document.getElementById('simulate-lanchid');

        // Hang lejátszásának kezelése
        function playAudio(audioUrl) {
            // Előző hang leállítása
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            // Új hang lejátszása
            const audio = new Audio(audioUrl);
            audio.play().catch(e => {
                console.log("Automatikus hanglejátszás nem engedélyezett: ", e);
            });
            currentAudio = audio;
        }

        // Tab váltás
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Tab aktiválása
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Tartalom megjelenítése
                tabContents.forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });

        // Navigáció státusz frissítése
        function updateNavigationStatus(active) {
            isNavigationActive = active;
            
            if (active) {
                navStatus.classList.add('active');
                statusDot.classList.add('active');
                statusText.textContent = 'Navigáció aktív';
            } else {
                navStatus.classList.remove('active');
                statusDot.classList.remove('active');
                statusText.textContent = 'Navigáció inaktív';
            }
        }

        // Távolság információk frissítése
        function updateDistanceInfo() {
            if (!currentPosition) return;
            
            const { latitude, longitude } = currentPosition.coords;
            
            // Távolság információk létrehozása/frissítése
            distanceInfo.innerHTML = '';
            
            pointsOfInterest.forEach(poi => {
                const distance = calculateDistance(
                    latitude, longitude, 
                    poi.lat, poi.lng
                );
                
                const distanceElement = document.createElement('div');
                distanceElement.className = 'distance-item';
                
                // Ha a felhasználó a hatósugáron belül van
                if (distance <= poi.radius) {
                    distanceElement.classList.add('reached');
                }
                
                distanceElement.innerHTML = `
                    <span class="poi-name">${poi.name}</span>
                    <span class="distance-value">${Math.round(distance)} <span class="distance-unit">m</span></span>
                `;
                
                distanceInfo.appendChild(distanceElement);
            });
        }

        // Képgaléria inicializálása
        function initGallery(poi) {
            galleryThumbnails.innerHTML = '';
            currentImageIndex = 0;
            
            if (poi.images && poi.images.length > 0) {
                // Bélyegkép beállítása
                thumbnailImage.src = poi.images[0];
                
                // Fő kép beállítása
                galleryMainImage.src = poi.images[0];
                
                // Bélyegképek létrehozása
                poi.images.forEach((image, index) => {
                    const thumb = document.createElement('img');
                    thumb.src = image;
                    thumb.alt = `Thumbnail ${index + 1}`;
                    thumb.className = 'gallery-thumbnail';
                    if (index === 0) thumb.classList.add('active');
                    
                    thumb.addEventListener('click', () => {
                        currentImageIndex = index;
                        updateGallery(poi);
                    });
                    
                    galleryThumbnails.appendChild(thumb);
                });
                
                // Navigációs gombok eseménykezelői
                prevBtn.onclick = () => {
                    currentImageIndex = (currentImageIndex - 1 + poi.images.length) % poi.images.length;
                    updateGallery(poi);
                };
                
                nextBtn.onclick = () => {
                    currentImageIndex = (currentImageIndex + 1) % poi.images.length;
                    updateGallery(poi);
                };
            }
        }
        
        // Galéria frissítése
        function updateGallery(poi) {
            galleryMainImage.src = poi.images[currentImageIndex];
            
            // Aktív bélyegkép frissítése
            const thumbs = galleryThumbnails.querySelectorAll('.gallery-thumbnail');
            thumbs.forEach((thumb, index) => {
                if (index === currentImageIndex) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
        }

        // Helymeghatározás inicializálása
        function initGeolocation() {
            if (!navigator.geolocation) {
                distanceInfo.innerHTML = '<p>A böngésző nem támogatja a helymeghatározást</p>';
                updateNavigationStatus(false);
                return;
            }
            
            updateNavigationStatus(true);
            
            // Pozíció változás figyelése
            watchId = navigator.geolocation.watchPosition(
                position => {
                    currentPosition = position;
                    checkForNearbyPois();
                    updateDistanceInfo();
                    updateNavigationStatus(true);
                },
                error => {
                    distanceInfo.innerHTML = '<p>Helymeghatározás nem elérhető</p>';
                    updateNavigationStatus(false);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        }

        // Közeledben lévő POI-k ellenőrzése
        function checkForNearbyPois() {
            if (!currentPosition) return;
            
            const { latitude, longitude } = currentPosition.coords;
            
            pointsOfInterest.forEach(poi => {
                const distance = calculateDistance(
                    latitude, longitude, 
                    poi.lat, poi.lng
                );
                
                // Ha a felhasználó elég közel van egy POI-hoz
                if (distance <= poi.radius && currentPoi !== poi.id) {
                    currentPoi = poi.id;
                    showPoiInfo(poi);
                    
                    // Hang automatikus lejátszása
                    playAudio(poi.audio);
                }
            });
        }

        // Két koordináta közötti távolság számítása (Haversine formula)
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371000; // Föld sugara méterben
            const dLat = deg2rad(lat2 - lat1);
            const dLon = deg2rad(lon2 - lon1);
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            const distance = R * c;
            return distance;
        }

        function deg2rad(deg) {
            return deg * (Math.PI/180);
        }

        // POI információk megjelenítése
        function showPoiInfo(poi) {
            poiTitle.textContent = poi.name;
            poiDescription.textContent = poi.description;
            poiAudio.src = poi.audio;
            
            initGallery(poi);
            
            // Váltás a POI tabra
            tabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="poi"]').classList.add('active');
            
            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById('poi-tab').classList.add('active');
        }

        // Szimulációs funkciók
        simulateBuda.addEventListener('click', () => {
            simulatePosition(budaiVarLat, budaiVarLng, "Budai Vár");
        });

        simulateHalaszbastya.addEventListener('click', () => {
            simulatePosition(halaszbastyaLat, halaszbastyaLng, "Halászbástya");
        });

        simulateLanchid.addEventListener('click', () => {
            simulatePosition(47.4986, 19.0439, "Széchenyi Lánchíd");
        });

        function simulatePosition(lat, lng, name) {
            // Szimuláljunk egy pozíciót
            currentPosition = {
                coords: {
                    latitude: lat,
                    longitude: lng,
                    accuracy: 10
                }
            };
            
            checkForNearbyPois();
            updateDistanceInfo();
            updateNavigationStatus(true);
        }

        // Bezárás gomb eseménykezelő
        closePoiButton.addEventListener('click', () => {
            // Váltás a távolságok tabra
            tabs.forEach(t => t.classList.remove('active'));
            document.querySelector('[data-tab="distance"]').classList.add('active');
            
            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById('distance-tab').classList.add('active');
            
            // Hang leállítása
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
        });

        // Alkalmazás inicializálása
        function initApp() {
            initGeolocation();
        }

        // Alkalmazás indítása
        initApp();
    </script>
</body>
</html>
